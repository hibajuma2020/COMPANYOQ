CREATE DATABASE COMPANYOQ
use COMPANYOQ

CREATE TABLE EMP
(
SSN CHAR(9) PRIMARY KEY,
BD Date,
Gender char(1),
First NVARCHAR(50),
LAST NVARCHAR(50),
Dnum INT,
Superid CHAR,
)


CREATE TABLE DEPT
(
Dnum INT PRIMARY KEY,
DName NVARCHAR(100),
MgrSSN CHAR,
Hiredate Date 
)

ALTER TABLE EMP
ADD CONSTRAINT FK_EMP_DEPT
FOREIGN KEY (Dnum)REFERENCES Dept(Dnum);



ALTER TABLE EMP
alter column Superid CHAR(9)

ALTER TABLE EMP
ADD CONSTRAINT FK_EMP_SUP
FOREIGN KEY (Superid)REFERENCES EMP(SSN);

CREATE TABLE LOCATIONS
(
Dnum INT,
Loc NVARCHAR(100),
PRIMARY KEY (Dnum,Loc),
FOREIGN KEY (Dnum) REFERENCES Dept(Dnum)
);

drop table LOCATIONS

CREATE TABLE LOCATIONS1
(
Dnum INT,
Loc NVARCHAR(100),
PRIMARY KEY (Dnum,Loc),
Dno int FOREIGN KEY   REFERENCES Dept(Dnum)
);

CREATE  TABLE PROJECT 
(
Pnum INT PRIMARY KEY,
Pnume NVARCHAR(100),
City NVARCHAR(100),
Loc NVARCHAR(100),
Dnum INT,
FOREIGN KEY (Dnum) REFERENCES Dept(Dnum)
);

ALTER TABLE PROJECT 
DROP CONSTRAINT FK_PROJECT_DEPT
ALTER TABLE PROJECT ALTER COLUMN Dnum INT NOT NULL
ALTER TABLE PROJECT
ADD CONSTRAINT FK_PROJECT_DEPT FOREIGN KEY (Dnum) REFERENCES DEPT(Dnum)

CREATE TABLE DEPENDENT
(
SSN CHAR(9),
DepName NVARCHAR(100),
Gender CHAR(1),
BD DATE,
PRIMARY KEY(SSN,DepName),
FOREIGN KEY (SSN) REFERENCES EMP(SSN)
);

CREATE TABLE MYWORK
(
SSN CHAR(9),
Pnum INT,
Hours INT,
PRIMARY KEY(SSN,Pnum),
FOREIGN KEY (SSN) REFERENCES EMP(SSN),
FOREIGN KEY (Pnum) REFERENCES Project(Pnum)
);

SELECT*FROM EMP;
SELECT*FROM dept;
INSERT INTO dept VALUES
(1,'HR' ,1111,'2020-03-09'),
(2,'IT',NULL,'2018-08-12'),
(3,'MATH',NULL,'2024-09-12'),
(4,'ARABIC',NULL,'2002-10-20'),
(5,'ENGLISH',NULL,'2003-05-30');

INSERT INTO EMP(SSN,BD,Gender,First,LAST,Dnum,Superid)VALUES
(1,'1990-01-01','M','SALIM','SAIF',1,NULL),
(2,'1996-06-09','M','AMJED','SULIMAN',2,444444444),
(333,'2000-09-27','F','SARA','HIBA',3,NULL),
(444,'2002-04-07','M','TARIQ','ALI',1,111111111),
(55,'2025-11-16','F','ARWA','NAJLA',1,NULL);

select * from EMP
select * from LOCATIONS1
TRUNCATE TABLE LOCATIONS1;

INSERT INTO LOCATIONS1(Dnum ,Loc,Dno) VALUES
(1,'Adam',3),
(2,'Izki',2),
(3,'Nizwa',1),
(4,'Manah',4),
(5,'Bahla',3);

select * from PROJECT

INSERT INTO PROJECT(Pnum,Pnume,City,Loc,Dnum) VALUES
(10 ,'HR System','Adam', 'HQ', 1),
(11, 'IT Upgrade', 'Izki', 'Branch', 2),
(12, 'Math Curriculum', 'Nizwa', 'Educational', 3),
(13, 'Arabic Program', 'Manah', 'Educational', 4),
(14, 'English Training', 'Bahla', 'Training', 5);

SELECT * FROM DEPENDENT

INSERT INTO Dependent(SSN,DepName,Gender,BD) VALUES
(111111111,'HR','M', '1990-01-01'),
(222222222,'IT','M','1996-06-09'),
(333333333,'MATH','F', '2000-09-27'),
(444444444,'ENGLISH','M','2002-04-07'),
(555555555,'ARABIC','F','2025-11-16');

SELECT * FROM MYWORK

INSERT INTO MyWork(SSN,Pnum,Hours) VALUES
('111111111', 10, 20),
('222222222', 11, 30),
('333333333', 12, 40),
('444444444', 13, 50),
('555555555', 14, 60);
















